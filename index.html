<!DOCTYPE html>
<html ng-app="mainApp" ng-cloak>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PS Theme Viewer</title>
    <link rel="stylesheet" href="css/app.compiled.min.css" />
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans:400,500,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,500,700" rel="stylesheet">
</head>

<body ng-controller="mainController">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12 col-sm-12">
                <div class="well well-sm">
                    <div class="btn-group" uib-dropdown is-open="status.isopen">
                        <button id="single-button" type="button" class="btn btn-primary" uib-dropdown-toggle ng-disabled="disabled">
                                {{selectedPresetPath}}
                                <span class="caret"></span>
                            </button>
                        <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button">
                            <li role="menuitem" ng-if="!presets">
                                <a href="#">Loading ...</a>
                            </li>
                            <li role="menuitem" ng-repeat="preset in presets" ng-click="presetSelected(preset)">
                                <a>{{preset.path}}</a>
                            </li>
                        </ul>
                    </div>
                    <button type="button" class="btn btn-primary" ng-disabled="!isTemplateSelected" ng-click="load()">Load Selected</button>
                    <button type="button" class="btn btn-warning" ng-disabled="!isEdited" ng-click="resetEdits()">Reset Edits</button>
                    <button type="button" class="btn btn-success" ng-disabled="!isEdited" ng-click="download()"><i class="glyphicon glyphicon-download"></i> Download</button>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 col-sm-12">
                <div class="well well-sm">
                    <table class="windowStyle">
                        <tr>
                            <td ng-repeat="colorKey in colorKeys">
                                <div class="fg">
                                    <input id="{{'fg_' + colorKey.key}}" name="window_fg" type="radio" ng-value="colorKey.key" ng-model="$parent.presetEdited.screenColors[0]" ng-change="screenColorChanged()">
                                    <label for="{{'fg_' + colorKey.key}}">FG</label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td ng-repeat="colorKey in colorKeys">
                                <div class="cc">
                                    <div style="background-color: {{presetEdited[colorKey.key]}};" title="Color Key: {{colorKey.displayName}}"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td ng-repeat="colorKey in colorKeys">
                                <div class="bg">
                                    <input id="{{'bg_' + colorKey.key}}" name="window_bg" type="radio" ng-value="colorKey.key" ng-model="$parent.presetEdited.screenColors[1]" ng-change="screenColorChanged()">
                                    <label for="{{'bg_' + colorKey.key}}">BG</label>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-8">
                <div class="well well-sm">
                    <div class="container-fluid" ng-if="hasColors">
                        <div class="row">
                            <div class="col-md-3 col-sm-12 col-xs-12" ng-repeat="colorKey in colorKeys">
                                <div class="row swatch">
                                    <div class="col-sm-12 swatch-title">
                                        <span>{{colorKey.displayName}}</span>
                                    </div>
                                    <div class="col-md-12 swatch-color">
                                        <div class="swatch-color-tile" style="background-color: {{::defaultPreset[colorKey.key]}};"></div>
                                        <div class="swatch-color-tile" style="background-color: {{preset[colorKey.key]}};"></div>
                                        <div class="swatch-color-edit-container">
                                            <div class="swatch-color-edited" ng-click="editColor(colorKey)" style="background-color: {{presetEdited[colorKey.key]}}; border-color: {{borderColor(presetEdited[colorKey.key])}};">
                                                <span class="glyphicon glyphicon-edit" style="color: {{borderColor(presetEdited[colorKey.key])}};"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12 swatch-color-code">
                                        <div class="row">
                                            <span class="col-xs-4 col-sm-4 col-md-4 text-left"><strong>Default</strong><br/>{{::defaultPreset[colorKey.key] | uppercase}}</span>
                                            <span class="col-xs-4 col-sm-4 col-md-4 text-center"><strong>Edited</strong><br/>{{presetEdited[colorKey.key] | uppercase}}</span>
                                            <span class="col-xs-4 col-sm-4 col-md-4 text-right"><strong>Preset</strong><br/>{{preset[colorKey.key] | uppercase}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div ng-if="!hasColors">
                        There are no colors in the selected preset.
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="row">
                    <div class="col-md-12">
                        <div class="well well-sm">
                            <div class="well-sm">
                                <strong>Color Editor</strong>
                                <strong ng-if="colorToEdit">
                                        -
                                        {{colorKey.displayName}}</strong>
                            </div>
                            <div class="row" ng-if="hasColors && !colorToEdit">
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <div class="well-sm">
                                        Select a color to Edit
                                    </div>
                                </div>
                            </div>
                            <div class="row editor" ng-show="colorToEdit">
                                <div class="col-md-12 col-sm-12 col-xs-12 picker">
                                    <div class="well well-sm">
                                        <canvas id="colorPicker" width="2400" height="960"></canvas>
                                    </div>
                                </div>
                                <div class="col-md-12 col-sm-12 col-xs-12 picker">
                                    <div class="well well-sm">
                                        <label for="colorInput">RGB Hex:
                                            </label>
                                        <input type="text" class="colorInput" name="colorInput" id="colorInput" ng-model="colorToEdit" />
                                        <div style="background-color:{{colorToEdit}};">&nbsp;</div>
                                    </div>
                                </div>
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <button class="btn btn-success pull-left" ng-click="editDone()">Done</button>
                                    <button class="btn btn-danger pull-right" ng-click="editCancel()">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="well well-sm">
                            <div class="well-sm">
                                <strong>Preview</strong>
                            </div>
                            <div class="row" ng-if="hasColors">
                                <div class="col-md-12">
                                    <div class="ps-window" style="background-color: {{presetEdited[presetEdited.screenColors[1]]}}; color: {{presetEdited[presetEdited.screenColors[0]]}};">
                                        <div class="ps-line">
                                            <span class="ps-words">Windows PowerShell</span>
                                        </div>
                                        <div class="ps-line">
                                            <span class="ps-words">Copyright (C) 2016 Microsoft Corporation. All rights reserved.</span>
                                        </div>
                                        <div class="ps-line">
                                            <span class="ps-words">&nbsp;</span>
                                        </div>
                                        <div class="ps-line">
                                            <span class="ps-words">PS C:\Users\Administrator> </span>
                                            <span class="ps-words" style="color: {{presetEdited['yellow']}};">Get-PSReadlineOption </span>
                                            <span class="ps-words" style="color: {{presetEdited['dark_gray']}};">-Verbose </span>
                                        </div>
                                        <div class="ps-line">
                                            <span class="ps-words" style="color: {{presetEdited['dark_green']}};"># this is a comments</span>
                                        </div>
                                        <div class="ps-line">
                                            <span class="ps-words" style="color: {{presetEdited['red']}};">this is an error message</span>
                                        </div>
                                        <div class="ps-line">
                                            <span class="ps-words" style="color: {{presetEdited['green']}};">$trees </span>
                                            <span class="ps-words" style="color: {{presetEdited['dark_gray']}};">= </span>
                                            <span class="ps-words" style="color: {{presetEdited[presetEdited.screenColors[0]]}};">@(</span><span class="ps-words" style="color: {{presetEdited['dark_cyan']}};">"Alder"</span><span class="ps-words" style="color: {{presetEdited['dark_gray']}};">,</span>
                                            <span class="ps-words" style="color: {{presetEdited['dark_cyan']}};">"Ash"</span><span class="ps-words" style="color: {{presetEdited['dark_gray']}};">,</span>
                                            <span class="ps-words" style="color: {{presetEdited['dark_cyan']}};">"Birch"</span><span class="ps-words" style="color: {{presetEdited[presetEdited.screenColors[0]]}};">)</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script async src="js/app.compiled.min.js"></script>
<script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-2269721-13', 'auto');
    ga('send', 'pageview');
</script>

</html>
