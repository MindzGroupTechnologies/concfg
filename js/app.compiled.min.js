!function(){"use strict";angular.module("mainApp",["ui.bootstrap"]).run(function(){function a(a,b){var c=a.getBoundingClientRect();return{x:Math.round(2400*(b.clientX-c.left)/c.width),y:Math.round(960*(b.clientY-c.top)/c.height)}}function b(b){var c=document.getElementById("colorPicker"),d=c.getContext("2d");c.addEventListener("click",function(b){var e=a(c,b),f=d.getImageData(e.x,e.y,1,1),g=f.data,h="#"+("00"+g[0].toString(16)).slice(-2)+("00"+g[1].toString(16)).slice(-2)+("00"+g[2].toString(16)).slice(-2);$("#colorInput").val(h),$("#colorInput").trigger("input")},!1),c.addEventListener("mousemove",function(a){},!1),d.drawImage(b,0,0)}var c=new Image;c.onload=function(){b(this)},c.src="assets/img/rgb.png"})}(),function(){"use strict";angular.module("mainApp").provider("gitService",function(){var a={client_id:"4c45baec3873ead63c91",client_secret:"0ace241b5bf4a6e5136b43be7bb4da9c67bb41c2"},b="",c="",d={method:"GET",params:a};this.$get=["$http",function(a){var e={};return e.getBranch=function(){var c={};return angular.copy(d,c),c.url="https://api.github.com/repos/lukesampson/concfg/branches/master",a(c).then(function(a){return b=a.data.commit.commit.tree.url,!0})},e.getBranchTree=function(){var e={};return angular.copy(d,e),e.url=b,a(e).then(function(a){return a.data.tree.forEach(function(a){"presets"==a.path&&(c=a.url)}),!!c})},e.getPresetList=function(){var b={};return angular.copy(d,b),b.url=c,a(b).then(function(a){return a.data.tree})},e.getPreset=function(b){var c={};return angular.copy(d,c),c.url=b,a(c).then(function(a){return a.data.content})},e}]})}(),function(){"use strict";angular.module("mainApp").controller("mainController",["$scope","gitService",function(a,b){var c=[{key:"black",displayName:"Black",psKey:"Black"},{key:"white",displayName:"White",psKey:"White"},{key:"dark_blue",displayName:"Dark Blue",psKey:"DarkBlue"},{key:"blue",displayName:"Blue",psKey:"Blue"},{key:"dark_green",displayName:"Dark Green",psKey:"DarkGreen"},{key:"green",displayName:"Green",psKey:"Green"},{key:"dark_cyan",displayName:"Dark Cyan",psKey:"DarkCyan"},{key:"cyan",displayName:"Cyan",psKey:"Cyan"},{key:"dark_red",displayName:"Dark Red",psKey:"DarkRed"},{key:"red",displayName:"Red",psKey:"Red"},{key:"dark_magenta",displayName:"Dark Magenta",psKey:"DarkMagenta"},{key:"magenta",displayName:"Magenta",psKey:"Magenta"},{key:"dark_yellow",displayName:"Dark Yellow",psKey:"Dark Yellow"},{key:"yellow",displayName:"Yellow",psKey:"Yellow"},{key:"dark_gray",displayName:"Dark Gray",psKey:"Dark Gray"},{key:"gray",displayName:"Gray",psKey:"Gray"}],d={black:"#000000",dark_blue:"#000080",dark_green:"#008000",dark_cyan:"#008080",dark_red:"#800000",dark_magenta:"#800080",dark_yellow:"#808000",gray:"#c0c0c0",dark_gray:"#808080",blue:"#0000ff",green:"#00ff00",cyan:"#00ffff",red:"#ff0000",magenta:"#ff00ff",yellow:"#ffff00",white:"#ffffff",screen_colors:"gray,black",popup_colors:"dark_magenta,white"},e=function(a){if(a.screen_colors){var b=a.screen_colors.split(",");a.screenColors=b}};a.colorKeys=c,a.preset={},a.presetEdited={},a.defaultPreset={},angular.copy(d,a.preset),angular.copy(d,a.presetEdited),angular.copy(d,a.defaultPreset),e(a.preset),e(a.presetEdited),e(a.defaultPreset),a.hasColors=!0,a.isEdited=!1,a.status={isopen:!1},a.selectedPreset=null,a.selectedPresetPath="Select Preset",a.isTemplateSelected=!1,a.presetSelected=function(b){a.selectedPreset=b,a.selectedPresetPath=b.path,a.isTemplateSelected=!0},a.load=function(){b.getPreset(a.selectedPreset.url).then(function(b){var c=atob(b);console.log("retrieved preset "+a.selectedPreset.path),console.log(c),a.preset=JSON.parse(c),a.isEdited||(angular.copy(a.preset,a.presetEdited),e(a.presetEdited)),a.hasColors=a.preset.black||a.preset.dark_blue||a.preset.dark_green||a.preset.dark_cyan||a.preset.dark_red||a.preset.dark_magenta||a.preset.dark_yellow||a.preset.dark_gray||a.preset.gray||a.preset.blue||a.preset.green||a.preset.cyan||a.preset.red||a.preset.magenta||a.preset.yellow||a.preset.white,a.preset.screen_colors&&e(a.preset),a.colorToEdit=null,delete a.colorKey})},a.colorToEdit=null,a.editColor=function(b){a.colorKey=b,a.colorToEdit=a.presetEdited[b.key]},a.resetEdits=function(){angular.copy(a.preset,a.presetEdited),a.isEdited=!1},a.editDone=function(){a.presetEdited[a.colorKey.key]=a.colorToEdit,a.colorToEdit=null,a.isEdited=!0,delete a.colorKey},a.editCancel=function(){a.colorToEdit=null,delete a.colorKey},a.screenColorChanged=function(){a.presetEdited.screen_colors=a.presetEdited.screenColors.join(),a.isEdited=!0},a.download=function(){var b=angular.copy(a.presetEdited);delete b.screenColors;var c=JSON.stringify(b,null,4),d="editied_preset.json",e=new Blob([c],{type:"application/json;charset=utf-8"});saveAs(e,d)},a.borderColor=function(a){var b=parseInt(a.substring(1).substring(0,2),16),c=parseInt(a.substring(1).substring(2,4),16),d=parseInt(a.substring(1).substring(4,6),16);return b>128||c>128||d>128?0===b&&0===c||0===b&&0===d||0===c&&0===d?"white":"black":"white"},b.getBranch().then(function(c){console.log("retrieved branch"),b.getBranchTree().then(function(c){console.log("retrieved branch tree"),b.getPresetList().then(function(b){console.log("retrieved "+b.length+" presets."),a.presets=b})})})}])}();var saveAs=saveAs||function(a){"use strict";if(!("undefined"==typeof a||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e="download"in d,f=function(a){var b=new MouseEvent("click");a.dispatchEvent(b)},g=/constructor/i.test(a.HTMLElement)||a.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent),i=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},j="application/octet-stream",k=4e4,l=function(a){var b=function(){"string"==typeof a?c().revokeObjectURL(a):a.remove()};setTimeout(b,k)},m=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(a){i(a)}}},n=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},o=function(b,i,k){k||(b=n(b));var o,p=this,q=b.type,r=q===j,s=function(){m(p,"writestart progress write writeend".split(" "))},t=function(){if((h||r&&g)&&a.FileReader){var d=new FileReader;return d.onloadend=function(){var b=h?d.result:d.result.replace(/^data:[^;]*;/,"data:attachment/file;"),c=a.open(b,"_blank");c||(a.location.href=b),b=void 0,p.readyState=p.DONE,s()},d.readAsDataURL(b),void(p.readyState=p.INIT)}if(o||(o=c().createObjectURL(b)),r)a.location.href=o;else{var e=a.open(o,"_blank");e||(a.location.href=o)}p.readyState=p.DONE,s(),l(o)};return p.readyState=p.INIT,e?(o=c().createObjectURL(b),void setTimeout(function(){d.href=o,d.download=i,f(d),s(),l(o),p.readyState=p.DONE})):void t()},p=o.prototype,q=function(a,b,c){return new o(a,b||a.name||"download",c)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(a,b,c){return b=b||a.name||"download",c||(a=n(a)),navigator.msSaveOrOpenBlob(a,b)}:(p.abort=function(){},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,q)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs});