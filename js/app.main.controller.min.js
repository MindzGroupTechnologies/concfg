(function(){angular.module("mainApp").controller("mainController",["$scope","gitService",function(b,a){var d=[{key:"black",displayName:"Black",psKey:"Black"},{key:"white",displayName:"White",psKey:"White"},{key:"dark_blue",displayName:"Dark Blue",psKey:"DarkBlue"},{key:"blue",displayName:"Blue",psKey:"Blue"},{key:"dark_green",displayName:"Dark Green",psKey:"DarkGreen"},{key:"green",displayName:"Green",psKey:"Green"},{key:"dark_cyan",displayName:"Dark Cyan",psKey:"DarkCyan"},{key:"cyan",displayName:"Cyan",psKey:"Cyan"},{key:"dark_red",displayName:"Dark Red",psKey:"DarkRed"},{key:"red",displayName:"Red",psKey:"Red"},{key:"dark_magenta",displayName:"Dark Magenta",psKey:"DarkMagenta"},{key:"magenta",displayName:"Magenta",psKey:"Magenta"},{key:"dark_yellow",displayName:"Dark Yellow",psKey:"Dark Yellow"},{key:"yellow",displayName:"Yellow",psKey:"Yellow"},{key:"dark_gray",displayName:"Dark Gray",psKey:"Dark Gray"},{key:"gray",displayName:"Gray",psKey:"Gray"}];var c={black:"#000000",dark_blue:"#000080",dark_green:"#008000",dark_cyan:"#008080",dark_red:"#800000",dark_magenta:"#800080",dark_yellow:"#808000",gray:"#c0c0c0",dark_gray:"#808080",blue:"#0000ff",green:"#00ff00",cyan:"#00ffff",red:"#ff0000",magenta:"#ff00ff",yellow:"#ffff00",white:"#ffffff",screen_colors:"cyan,black",popup_colors:"black,cyan"};b.colorKeys=d;b.preset={};b.presetEdited={};b.defaultPreset={};angular.copy(c,b.preset);angular.copy(c,b.presetEdited);angular.copy(c,b.defaultPreset);b.hasColors=true;b.isEdited=false;b.status={isopen:false};b.selectedPreset=null;b.selectedPresetPath="Select Preset";b.isTemplateSelected=false;b.presetSelected=function(e){b.selectedPreset=e;b.selectedPresetPath=e.path;b.isTemplateSelected=true};b.load=function(){a.getPreset(b.selectedPreset.url).then(function(f){var e=atob(f);console.log("retrieved preset "+b.selectedPreset.path);console.log(e);b.preset=JSON.parse(e);if(!b.isEdited){angular.copy(b.preset,b.presetEdited)}b.hasColors=b.preset.black||b.preset.dark_blue||b.preset.dark_green||b.preset.dark_cyan||b.preset.dark_red||b.preset.dark_magenta||b.preset.dark_yellow||b.preset.dark_gray||b.preset.gray||b.preset.blue||b.preset.green||b.preset.cyan||b.preset.red||b.preset.magenta||b.preset.yellow||b.preset.white})};b.colorToEdit=null;b.editColor=function(e){b.colorKey=e;b.colorToEdit=b.presetEdited[e.key]};b.resetEdits=function(){angular.copy(b.preset,b.presetEdited);b.isEdited=false};b.editDone=function(){b.presetEdited[b.colorKey.key]=b.colorToEdit;b.colorToEdit=null;b.isEdited=true};b.editCancel=function(){b.colorToEdit=null};b.borderColor=function(f){var h=parseInt(f.substring(1).substring(0,2),16);var g=parseInt(f.substring(1).substring(2,4),16);var e=parseInt(f.substring(1).substring(4,6),16);return h>128||g>128||e>128?(h===0&&g===0||h===0&&e===0||g===0&&e===0)?"white":"black":"white"};a.getBranch().then(function(e){console.log("retrieved branch");a.getBranchTree().then(function(f){console.log("retrieved branch tree");a.getPresetList().then(function(g){console.log("retrieved "+g.length+" presets.");b.presets=g})})})}])})();